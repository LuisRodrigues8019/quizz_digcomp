<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Correction Quiz Windows</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        padding: 20px;
      }
      .correction-container {
        max-width: 600px;
        margin: 0 auto;
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .correction-item {
        margin-bottom: 20px;
      }
      .correction-item h3 {
        font-size: 18px;
        margin-bottom: 5px;
      }
      .correct-answer {
        color: green;
        font-weight: bold;
      }
      .user-answer.correct {
        color: green;
        font-weight: bold;
      }
      .user-answer.incorrect {
        color: red;
        font-weight: bold;
      }
      .status-text {
        margin-left: 10px;
        font-style: italic;
      }
      .status-text.correct {
        color: green;
      }
      .status-text.incorrect {
        color: red;
      }
    </style>
  </head>
  <body>
    <div class="correction-container">
      <h1>Correction</h1>
      <div id="correction-content"></div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const correctionContent = document.getElementById("correction-content");

        // Récupérer les réponses de l'utilisateur et les réponses correctes depuis le Local Storage
        const userAnswers =
          JSON.parse(sessionStorage.getItem("userAnswers")) || [];
        const correctAnswers =
          JSON.parse(sessionStorage.getItem("correctAnswers")) || [];
        const questions = JSON.parse(sessionStorage.getItem("questions")) || [];

        // Assurer que nous avons toutes les données nécessaires
        if (userAnswers.length && correctAnswers.length && questions.length) {
          questions.forEach((question, index) => {
            const correctionItem = document.createElement("div");
            correctionItem.classList.add("correction-item");

            // Titre de la question
            const questionTitle = document.createElement("h3");
            questionTitle.textContent =
              question.numb + ". " + question.question;
            correctionItem.appendChild(questionTitle);

            // Réponse de l'utilisateur
            const userAnswer = document.createElement("p");
            userAnswer.textContent = `Votre réponse : ${userAnswers[index]}`;
            const isCorrect = userAnswers[index] === correctAnswers[index];
            userAnswer.classList.add(
              "user-answer",
              isCorrect ? "correct" : "incorrect"
            );
            correctionItem.appendChild(userAnswer);

            // Indication de correction
            const statusText = document.createElement("span");
            statusText.textContent = isCorrect
              ? "(Réponse correcte)"
              : "(Réponse fausse)";
            statusText.classList.add(
              "status-text",
              isCorrect ? "correct" : "incorrect"
            );
            userAnswer.appendChild(statusText);

            // Réponse correcte
            const correctAnswer = document.createElement("p");
            correctAnswer.textContent = `Réponse correcte : ${correctAnswers[index]}`;
            correctAnswer.classList.add("correct-answer");
            correctionItem.appendChild(correctAnswer);

            // Ajouter l'élément de correction au conteneur
            correctionContent.appendChild(correctionItem);
          });
          sessionStorage.clear();
        } else {
          correctionContent.textContent =
            "Aucune donnée de correction disponible.";
        }
      });
    </script>
  </body>
</html>
